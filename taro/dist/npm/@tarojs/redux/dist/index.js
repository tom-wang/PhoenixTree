"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var store=null;function getStore(){return store}function setStore(t){store=t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function _get(t,e,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:_get(n,e,o)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(o):void 0}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function isObject(t){return null!=t&&"object"===_typeof(t)&&!Array.isArray(t)}function mergeObjects(t,e){var o=Object.assign({},t);if(isObject(t)&&isObject(e))for(var r in e)isObject(t[r])&&isObject(e[r])?o[r]=mergeObjects(t[r],e[r]):o[r]=e[r];return o}function connect(i,t){var c=getStore(),e=c.dispatch,s="function"==typeof t?t(e):{};s.dispatch=e;return function(e){var r=null;return function(t){function o(){var e;return _classCallCheck(this,o),e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,Object.assign.apply(Object,Array.prototype.slice.call(arguments).concat([mergeObjects(i(c.getState()),s)])))),Object.keys(s).forEach(function(t){e["__event_".concat(t)]=s[t]}),e}return _inherits(o,e),_createClass(o,[{key:"componentWillMount",value:function(){var t=getStore();Object.assign(this.props,mergeObjects(i(t.getState()),s)),r=t.subscribe(function(){var o=this,r=!1,n=i(c.getState());Object.keys(n).forEach(function(t){var e=n[t];isObject(e)&&isObject(s[t])&&(e=mergeObjects(e,s[t])),o.prevProps=Object.assign({},o.props),o.props[t]!==e&&(o.props[t]=e,r=!0)});var t=this.$root?this.$root.$isPageHide:this.$isPageHide;r&&!t&&(this._unsafeCallUpdate=!0,this.setState({},function(){delete o._unsafeCallUpdate}))}.bind(this)),_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"componentWillMount",this)&&_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"componentWillMount",this).call(this)}},{key:"componentDidShow",value:function(){this.$isPageHide=!1,_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"componentDidShow",this)&&_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"componentDidShow",this).call(this)}},{key:"componentDidHide",value:function(){this.$isPageHide=!0,_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"componentDidHide",this)&&_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"componentDidHide",this).call(this)}},{key:"componentWillUnmount",value:function(){_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"componentWillUnmount",this)&&_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"componentWillUnmount",this).call(this),r&&r(),r=null}}]),o}()}}var Provider=function t(){_classCallCheck(this,t)},index={connect:connect,Provider:Provider,getStore:getStore,setStore:setStore};exports.default=index,exports.connect=connect,exports.Provider=Provider,exports.getStore=getStore,exports.setStore=setStore;